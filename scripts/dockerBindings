# Source this to have some usefull shortcuts
export PATH=/scripts:$PATH:/ceph/build/bin

function cdb {
  cd /ceph/build
}

function cdd {
  cd /ceph/src/pybind/mgr/dashboard
}

function cdf {
  cd /ceph/src/pybind/mgr/dashboard/frontend
}

function ceph-reset {
  ceph-stop
  ceph-start
}

function cd-lint-python {
    cdd
    tox -e lint
}

function cd-unit-tests {
    cdd
    tox
}

function cd-traceback {
    reload-dashboard
    traceback-mgr
}

function cd-debug {
    reload-dashboard
    tail -f /ceph/build/out/mgr.x.log | grep -i --line-buffered "\[dashboard\] [^N]"
}

function traceback-mgr {
    grep -A 30 -B 30 "Traceback" /ceph/build/out/mgr.x.log
    tail -f /ceph/build/out/mgr.x.log | grep --line-buffered -A 30 -B 30 "Traceback"
}

function debug-mgr {
    tail -f /ceph/build/out/mgr.x.log | grep --line-buffered "\[py\] [^N]"
}

# Change timezone to chicago
cd /etc
ln -sf ../usr/share/zoneinfo/America/Chicago localtime
